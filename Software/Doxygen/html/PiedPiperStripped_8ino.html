<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pied Piper: PiedPiperStripped/PiedPiperStripped.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pied Piper
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97f1531f65cf3d514507a4f48cead63c.html">PiedPiperStripped</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PiedPiperStripped.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;SD.h&gt;</code><br />
<code>#include &lt;SPI.h&gt;</code><br />
<code>#include &lt;Wire.h&gt;</code><br />
<code>#include &quot;RTClib.h&quot;</code><br />
<code>#include &quot;SAMDTimerInterrupt.h&quot;</code><br />
<code>#include &lt;Adafruit_NeoPixel.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for PiedPiperStripped.ino:</div>
<div class="dyncontent">
<div class="center"><img src="PiedPiperStripped_8ino__incl.png" border="0" usemap="#aPiedPiperStripped_2PiedPiperStripped_8ino" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopTime.html">opTime</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a451c16a9f8be86b7231bd651b3f1d8a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">AUD_OUT_SAMPLE_FREQ</a>&#160;&#160;&#160;4096</td></tr>
<tr class="memdesc:a451c16a9f8be86b7231bd651b3f1d8a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">original sample rate of playback file  <a href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">More...</a><br /></td></tr>
<tr class="separator:a451c16a9f8be86b7231bd651b3f1d8a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7bb65edc18ea6805461f3ce98621a8b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ae7bb65edc18ea6805461f3ce98621a8b">AUD_OUT_TIME</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:ae7bb65edc18ea6805461f3ce98621a8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum length of playback file in seconds  <a href="PiedPiperStripped_8ino.html#ae7bb65edc18ea6805461f3ce98621a8b">More...</a><br /></td></tr>
<tr class="separator:ae7bb65edc18ea6805461f3ce98621a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad46f3292e99b274ab10af94e583dbf31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">SINC_FILTER_UPSAMPLE_RATIO</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:ad46f3292e99b274ab10af94e583dbf31"><td class="mdescLeft">&#160;</td><td class="mdescRight">sinc filter upsample ratio, ideally should be a power of 2  <a href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">More...</a><br /></td></tr>
<tr class="separator:ad46f3292e99b274ab10af94e583dbf31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b2ab394bc690fb4ff83187ac1eec852"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a8b2ab394bc690fb4ff83187ac1eec852">SINC_FILTER_ZERO_X</a>&#160;&#160;&#160;7</td></tr>
<tr class="memdesc:a8b2ab394bc690fb4ff83187ac1eec852"><td class="mdescLeft">&#160;</td><td class="mdescRight">sinc filter number of zero crossings, more crossings will produce a cleaner result but will also use more processor time  <a href="PiedPiperStripped_8ino.html#a8b2ab394bc690fb4ff83187ac1eec852">More...</a><br /></td></tr>
<tr class="separator:a8b2ab394bc690fb4ff83187ac1eec852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab193d614ac37c0f02cbdf729891ee2d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ab193d614ac37c0f02cbdf729891ee2d4">SD_OPEN_ATTEMPT_COUNT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ab193d614ac37c0f02cbdf729891ee2d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of times to retry SD.begin()  <a href="PiedPiperStripped_8ino.html#ab193d614ac37c0f02cbdf729891ee2d4">More...</a><br /></td></tr>
<tr class="separator:ab193d614ac37c0f02cbdf729891ee2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab11e49bb2b3f85b5dc522d3e1566c6ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ab11e49bb2b3f85b5dc522d3e1566c6ea">SD_OPEN_RETRY_DELAY_MS</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:ab11e49bb2b3f85b5dc522d3e1566c6ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">delay between SD.begin() attempts  <a href="PiedPiperStripped_8ino.html#ab11e49bb2b3f85b5dc522d3e1566c6ea">More...</a><br /></td></tr>
<tr class="separator:ab11e49bb2b3f85b5dc522d3e1566c6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b3806eea0c840ae57143aad5a84e2ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a6b3806eea0c840ae57143aad5a84e2ab">AUD_OUT</a>&#160;&#160;&#160;A0</td></tr>
<tr class="memdesc:a6b3806eea0c840ae57143aad5a84e2ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio output pin.  <a href="PiedPiperStripped_8ino.html#a6b3806eea0c840ae57143aad5a84e2ab">More...</a><br /></td></tr>
<tr class="separator:a6b3806eea0c840ae57143aad5a84e2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2af60d7cff46682242567fb759029dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#aa2af60d7cff46682242567fb759029dc">HYPNOS_5VR</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:aa2af60d7cff46682242567fb759029dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hypnos 5 volt rail.  <a href="PiedPiperStripped_8ino.html#aa2af60d7cff46682242567fb759029dc">More...</a><br /></td></tr>
<tr class="separator:aa2af60d7cff46682242567fb759029dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a059001a7a2568961faea05247c594eea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a059001a7a2568961faea05247c594eea">HYPNOS_3VR</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a059001a7a2568961faea05247c594eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hypnos 3 volt rail.  <a href="PiedPiperStripped_8ino.html#a059001a7a2568961faea05247c594eea">More...</a><br /></td></tr>
<tr class="separator:a059001a7a2568961faea05247c594eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e2d8ef8f0724f23ce84b1e7d0c171d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a7e2d8ef8f0724f23ce84b1e7d0c171d9">SD_CS</a>&#160;&#160;&#160;11</td></tr>
<tr class="memdesc:a7e2d8ef8f0724f23ce84b1e7d0c171d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chip select for SD.  <a href="PiedPiperStripped_8ino.html#a7e2d8ef8f0724f23ce84b1e7d0c171d9">More...</a><br /></td></tr>
<tr class="separator:a7e2d8ef8f0724f23ce84b1e7d0c171d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4ed79c618c00a2bcecefa5d88da138"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a3f4ed79c618c00a2bcecefa5d88da138">AMP_SD</a>&#160;&#160;&#160;9</td></tr>
<tr class="memdesc:a3f4ed79c618c00a2bcecefa5d88da138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Amplifier enable.  <a href="PiedPiperStripped_8ino.html#a3f4ed79c618c00a2bcecefa5d88da138">More...</a><br /></td></tr>
<tr class="separator:a3f4ed79c618c00a2bcecefa5d88da138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada94539ceccb038745a46d3047c6241b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ada94539ceccb038745a46d3047c6241b">DEFAULT_PLAYBACK_INT</a>&#160;&#160;&#160;1440</td></tr>
<tr class="memdesc:ada94539ceccb038745a46d3047c6241b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Briefly wake device after this many minutes if no playback intervals are defined (PBINT.txt is empty) If set to 0, playback will be performed forever and operation times defined in PBINT.txt will be ignored.  <a href="PiedPiperStripped_8ino.html#ada94539ceccb038745a46d3047c6241b">More...</a><br /></td></tr>
<tr class="separator:ada94539ceccb038745a46d3047c6241b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a53ef58bdd502817962e5ff18ada74465"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465">SLEEPMODES</a> { <br />
&#160;&#160;<a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465a136e5e3efa909548904befb154959956">IDLE0</a> = 0x0
, <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465ae866104863031a7c9a3c01e769513336">IDLE1</a> = 0x1
, <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465a363a63cb0837a4836265b578e7902246">IDLE2</a> = 0x2
, <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465ae4634ae4352b512b38c5da9dc1610ca6">STANDBY</a> = 0x4
, <br />
&#160;&#160;<a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465ac22ce256f44d6d9df78af9ee4ee9b3b7">HIBERNATE</a> = 0x5
, <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465a243c5a167c2e9f1cf4bae8cfe682fcb7">BACKUP</a> = 0x6
, <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465aac132f2982b98bcaa3445e535a03ff75">OFF</a> = 0x7
<br />
 }</td></tr>
<tr class="separator:a53ef58bdd502817962e5ff18ada74465"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af945bfac8e0ca0e4357f87fef159d0e4"><td class="memItemLeft" align="right" valign="top">Adafruit_NeoPixel&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#af945bfac8e0ca0e4357f87fef159d0e4">indicator</a> (1, 8, NEO_GRB+NEO_KHZ800)</td></tr>
<tr class="memdesc:af945bfac8e0ca0e4357f87fef159d0e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">LED indicator.  <a href="PiedPiperStripped_8ino.html#af945bfac8e0ca0e4357f87fef159d0e4">More...</a><br /></td></tr>
<tr class="separator:af945bfac8e0ca0e4357f87fef159d0e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a776c50fdabbed22227ae06792dd4886e"><td class="memItemLeft" align="right" valign="top">SAMDTimer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a776c50fdabbed22227ae06792dd4886e">ITimer</a> (TIMER_TC3)</td></tr>
<tr class="memdesc:a776c50fdabbed22227ae06792dd4886e"><td class="mdescLeft">&#160;</td><td class="mdescRight">SAMD timer interrupt.  <a href="PiedPiperStripped_8ino.html#a776c50fdabbed22227ae06792dd4886e">More...</a><br /></td></tr>
<tr class="separator:a776c50fdabbed22227ae06792dd4886e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab916d989eaeabdd60f24ae2b5078a66a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ab916d989eaeabdd60f24ae2b5078a66a">stopISRTimer</a> ()</td></tr>
<tr class="separator:ab916d989eaeabdd60f24ae2b5078a66a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae393e2d86cdd56ebac9dfae383897798"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ae393e2d86cdd56ebac9dfae383897798">startISRTimer</a> (const unsigned long interval_us, void(*fnPtr)())</td></tr>
<tr class="separator:ae393e2d86cdd56ebac9dfae383897798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72c0738f4a74e1c18212b5b01d2146e3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a72c0738f4a74e1c18212b5b01d2146e3">initializeRTC</a> ()</td></tr>
<tr class="separator:a72c0738f4a74e1c18212b5b01d2146e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a549c88d77b1a7dee61f532a50a6d14c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a549c88d77b1a7dee61f532a50a6d14c5">configurePins</a> ()</td></tr>
<tr class="separator:a549c88d77b1a7dee61f532a50a6d14c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d17aee60ad53201762c3fd8dff40448"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a8d17aee60ad53201762c3fd8dff40448">goToSleep</a> (<a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465">SLEEPMODES</a> mode)</td></tr>
<tr class="separator:a8d17aee60ad53201762c3fd8dff40448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89389afa6bc2bf333dd3f55ba5cffdcb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a89389afa6bc2bf333dd3f55ba5cffdcb">OpenFile</a> (char *fname, uint8_t mode)</td></tr>
<tr class="separator:a89389afa6bc2bf333dd3f55ba5cffdcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00510b3f6ba15663bf0a8148c616cf16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a00510b3f6ba15663bf0a8148c616cf16">LoadSettings</a> ()</td></tr>
<tr class="separator:a00510b3f6ba15663bf0a8148c616cf16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ecc17c52d48df84672c977351befd8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a74ecc17c52d48df84672c977351befd8">LoadOperationTimes</a> ()</td></tr>
<tr class="separator:a74ecc17c52d48df84672c977351befd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19e84783631872424b55189542e0325"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ae19e84783631872424b55189542e0325">LoadSound</a> ()</td></tr>
<tr class="separator:ae19e84783631872424b55189542e0325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42bf83e6351925a1d1beb690c0da26c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a42bf83e6351925a1d1beb690c0da26c7">addOperationTime</a> (int hour, int minute)</td></tr>
<tr class="separator:a42bf83e6351925a1d1beb690c0da26c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d76a565d6ad625fdb769f1993a9ea75"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a7d76a565d6ad625fdb769f1993a9ea75">setupOperation</a> ()</td></tr>
<tr class="separator:a7d76a565d6ad625fdb769f1993a9ea75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57e4ed140620dd3e177cbd7c92660254"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a57e4ed140620dd3e177cbd7c92660254">Playback</a> ()</td></tr>
<tr class="separator:a57e4ed140620dd3e177cbd7c92660254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c2ab74cd863dcce0e9c6a79a88cb7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a30c2ab74cd863dcce0e9c6a79a88cb7e">emptyFunction</a> ()</td></tr>
<tr class="separator:a30c2ab74cd863dcce0e9c6a79a88cb7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c97f550e2906d36988f871bad00ed2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a6c97f550e2906d36988f871bad00ed2a">OutputUpsampledSample</a> ()</td></tr>
<tr class="separator:a6c97f550e2906d36988f871bad00ed2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add5dd49099d68e30967018b6bf108b0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#add5dd49099d68e30967018b6bf108b0d">calculateUpsampleSincFilterTable</a> ()</td></tr>
<tr class="separator:add5dd49099d68e30967018b6bf108b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37f960cddfa2b14d44d725883242b83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#af37f960cddfa2b14d44d725883242b83">ResetSPI</a> ()</td></tr>
<tr class="separator:af37f960cddfa2b14d44d725883242b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ebac3ac4f9a0dea055360b0b334712"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a28ebac3ac4f9a0dea055360b0b334712">BeginSD</a> ()</td></tr>
<tr class="separator:a28ebac3ac4f9a0dea055360b0b334712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6fa46494611dcbfb87b3e5c7efef153"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ad6fa46494611dcbfb87b3e5c7efef153">LogAlive</a> ()</td></tr>
<tr class="separator:ad6fa46494611dcbfb87b3e5c7efef153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ec00c79533b4c597b3ecd9abd38b52a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a2ec00c79533b4c597b3ecd9abd38b52a">initializationFailFlash</a> ()</td></tr>
<tr class="separator:a2ec00c79533b4c597b3ecd9abd38b52a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0631412e0a073299f82b6d1a8e9a6ec8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a0631412e0a073299f82b6d1a8e9a6ec8">initializationSuccessFlash</a> ()</td></tr>
<tr class="separator:a0631412e0a073299f82b6d1a8e9a6ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad56a3d9df2dada704805e02951fda841"><td class="memItemLeft" align="right" valign="top">const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ad56a3d9df2dada704805e02951fda841">settings_filename</a> [] = &quot;settings.txt&quot;</td></tr>
<tr class="memdesc:ad56a3d9df2dada704805e02951fda841"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of file to load settings from such as name of playback file and opeation intervals file.  <a href="PiedPiperStripped_8ino.html#ad56a3d9df2dada704805e02951fda841">More...</a><br /></td></tr>
<tr class="separator:ad56a3d9df2dada704805e02951fda841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eeff5e8367f449972a7648bc688975e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465">SLEEPMODES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a0eeff5e8367f449972a7648bc688975e">sleepmode</a> = <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465aac132f2982b98bcaa3445e535a03ff75">OFF</a></td></tr>
<tr class="memdesc:a0eeff5e8367f449972a7648bc688975e"><td class="mdescLeft">&#160;</td><td class="mdescRight">For this version, "OFF" sleep mode is used which results in the least power consumption (draws less than 1mA)  <a href="PiedPiperStripped_8ino.html#a0eeff5e8367f449972a7648bc688975e">More...</a><br /></td></tr>
<tr class="separator:a0eeff5e8367f449972a7648bc688975e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a17d5e948f78547058c12befd2c7d5b"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a3a17d5e948f78547058c12befd2c7d5b">outputSampleDelayTime</a> = 1000000 / (<a class="el" href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">AUD_OUT_SAMPLE_FREQ</a> * <a class="el" href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">SINC_FILTER_UPSAMPLE_RATIO</a>)</td></tr>
<tr class="memdesc:a3a17d5e948f78547058c12befd2c7d5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">output sample delay time, essentially how often the timer interrupt will fire (in microseconds)  <a href="PiedPiperStripped_8ino.html#a3a17d5e948f78547058c12befd2c7d5b">More...</a><br /></td></tr>
<tr class="separator:a3a17d5e948f78547058c12befd2c7d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a366e2fd381c98142cd18d3f91ead2359"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a366e2fd381c98142cd18d3f91ead2359">sincTableSizeUp</a> = (2 * <a class="el" href="PiedPiperStripped_8ino.html#a8b2ab394bc690fb4ff83187ac1eec852">SINC_FILTER_ZERO_X</a> + 1) * <a class="el" href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">SINC_FILTER_UPSAMPLE_RATIO</a> - <a class="el" href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">SINC_FILTER_UPSAMPLE_RATIO</a> + 1</td></tr>
<tr class="memdesc:a366e2fd381c98142cd18d3f91ead2359"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of sinc filter table  <a href="PiedPiperStripped_8ino.html#a366e2fd381c98142cd18d3f91ead2359">More...</a><br /></td></tr>
<tr class="separator:a366e2fd381c98142cd18d3f91ead2359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e30e679c93b4f551dd5b0d44c1b71c8"><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a3e30e679c93b4f551dd5b0d44c1b71c8">outputSampleBuffer</a> [<a class="el" href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">AUD_OUT_SAMPLE_FREQ</a> *<a class="el" href="PiedPiperStripped_8ino.html#ae7bb65edc18ea6805461f3ce98621a8b">AUD_OUT_TIME</a>]</td></tr>
<tr class="memdesc:a3e30e679c93b4f551dd5b0d44c1b71c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">output sample buffer stores the values corresponding to the playback file that is loaded from the SD card  <a href="PiedPiperStripped_8ino.html#a3e30e679c93b4f551dd5b0d44c1b71c8">More...</a><br /></td></tr>
<tr class="separator:a3e30e679c93b4f551dd5b0d44c1b71c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149657b52d9aa4f78555948ebc0661b3"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a149657b52d9aa4f78555948ebc0661b3">outputSampleBufferIdx</a> = 0</td></tr>
<tr class="memdesc:a149657b52d9aa4f78555948ebc0661b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">stores the position of the current sample for playback  <a href="PiedPiperStripped_8ino.html#a149657b52d9aa4f78555948ebc0661b3">More...</a><br /></td></tr>
<tr class="separator:a149657b52d9aa4f78555948ebc0661b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd79228a708981fbc75ccd3c3ec9342f"><td class="memItemLeft" align="right" valign="top">volatile short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#afd79228a708981fbc75ccd3c3ec9342f">nextOutputSample</a> = 2048</td></tr>
<tr class="memdesc:afd79228a708981fbc75ccd3c3ec9342f"><td class="mdescLeft">&#160;</td><td class="mdescRight">stores value of the next output sample for playing back audio  <a href="PiedPiperStripped_8ino.html#afd79228a708981fbc75ccd3c3ec9342f">More...</a><br /></td></tr>
<tr class="separator:afd79228a708981fbc75ccd3c3ec9342f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fca0a4962bc07fe1010e0f494c74b81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a2fca0a4962bc07fe1010e0f494c74b81">playbackSampleCount</a> = <a class="el" href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">AUD_OUT_SAMPLE_FREQ</a> * <a class="el" href="PiedPiperStripped_8ino.html#ae7bb65edc18ea6805461f3ce98621a8b">AUD_OUT_TIME</a></td></tr>
<tr class="memdesc:a2fca0a4962bc07fe1010e0f494c74b81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the total number of sample loaded from the playback file. Originally this is set to the maximum number of samples that can be stored SAMPLE_RATE * AUD_OUT_TIME, but this value is updated upon call to <a class="el" href="PiedPiperStripped_8ino.html#ae19e84783631872424b55189542e0325">LoadSound()</a> since our playback sound isn't garanteed to be exactly AUD_OUT_TIME seconds long.  <a href="PiedPiperStripped_8ino.html#a2fca0a4962bc07fe1010e0f494c74b81">More...</a><br /></td></tr>
<tr class="separator:a2fca0a4962bc07fe1010e0f494c74b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a135a5b2700d254f9273a3408087ae766"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a135a5b2700d254f9273a3408087ae766">sincFilterTableUpsample</a> [<a class="el" href="PiedPiperStripped_8ino.html#a366e2fd381c98142cd18d3f91ead2359">sincTableSizeUp</a>]</td></tr>
<tr class="memdesc:a135a5b2700d254f9273a3408087ae766"><td class="mdescLeft">&#160;</td><td class="mdescRight">stores values of sinc function (sin(x) / x) for upsampling the samples stored in outputSampleBuffer during <a class="el" href="PiedPiperStripped_8ino.html#a57e4ed140620dd3e177cbd7c92660254">Playback()</a> using outputUpsampledSample()  <a href="PiedPiperStripped_8ino.html#a135a5b2700d254f9273a3408087ae766">More...</a><br /></td></tr>
<tr class="separator:a135a5b2700d254f9273a3408087ae766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb3c36e809dbd77924104038b458966"><td class="memItemLeft" align="right" valign="top">volatile short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#afdb3c36e809dbd77924104038b458966">upsampleFilterInput</a> [<a class="el" href="PiedPiperStripped_8ino.html#a366e2fd381c98142cd18d3f91ead2359">sincTableSizeUp</a>]</td></tr>
<tr class="memdesc:afdb3c36e809dbd77924104038b458966"><td class="mdescLeft">&#160;</td><td class="mdescRight">sinc filter input buffer for upsampling  <a href="PiedPiperStripped_8ino.html#afdb3c36e809dbd77924104038b458966">More...</a><br /></td></tr>
<tr class="separator:afdb3c36e809dbd77924104038b458966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed89bc2e0332e0607d2f2e912c93c0a"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#afed89bc2e0332e0607d2f2e912c93c0a">upsampleInputIdx</a> = 0</td></tr>
<tr class="memdesc:afed89bc2e0332e0607d2f2e912c93c0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">next position in upsample input buffer  <a href="PiedPiperStripped_8ino.html#afed89bc2e0332e0607d2f2e912c93c0a">More...</a><br /></td></tr>
<tr class="separator:afed89bc2e0332e0607d2f2e912c93c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0139b53c33b21f387a590efff555c27"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ab0139b53c33b21f387a590efff555c27">upsampleInputCount</a> = 0</td></tr>
<tr class="memdesc:ab0139b53c33b21f387a590efff555c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">upsample count, determines whether to pad with zeroes or read next value from outputSampleBuffer  <a href="PiedPiperStripped_8ino.html#ab0139b53c33b21f387a590efff555c27">More...</a><br /></td></tr>
<tr class="separator:ab0139b53c33b21f387a590efff555c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f8f9353d893423cdc1c7b7dff6b022"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structopTime.html">opTime</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#ac5f8f9353d893423cdc1c7b7dff6b022">operationTimes</a> = NULL</td></tr>
<tr class="memdesc:ac5f8f9353d893423cdc1c7b7dff6b022"><td class="mdescLeft">&#160;</td><td class="mdescRight">*operationTimes is a dynamically allocated array which stores parsed operation times from PBINT.txt, dynamic memory is used for this because we do not know how many operation times are defined in PBINT.txt during compilation  <a href="PiedPiperStripped_8ino.html#ac5f8f9353d893423cdc1c7b7dff6b022">More...</a><br /></td></tr>
<tr class="separator:ac5f8f9353d893423cdc1c7b7dff6b022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9f0e8c2e8600cd11a2beff55afc21aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#aa9f0e8c2e8600cd11a2beff55afc21aa">numOperationTimes</a> = 0</td></tr>
<tr class="memdesc:aa9f0e8c2e8600cd11a2beff55afc21aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">the number of elements in operationTimes array  <a href="PiedPiperStripped_8ino.html#aa9f0e8c2e8600cd11a2beff55afc21aa">More...</a><br /></td></tr>
<tr class="separator:aa9f0e8c2e8600cd11a2beff55afc21aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f277818bdae2e988b4eea01b571894"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#a45f277818bdae2e988b4eea01b571894">playback_filename</a> [32]</td></tr>
<tr class="memdesc:a45f277818bdae2e988b4eea01b571894"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of the file used for playback audio, name of file is loaded from SD card  <a href="PiedPiperStripped_8ino.html#a45f277818bdae2e988b4eea01b571894">More...</a><br /></td></tr>
<tr class="separator:a45f277818bdae2e988b4eea01b571894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af587eb80e2a6cba0f25bc532ce9f41d1"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#af587eb80e2a6cba0f25bc532ce9f41d1">playback_interval</a> [32]</td></tr>
<tr class="memdesc:af587eb80e2a6cba0f25bc532ce9f41d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of the file used for loading operation intervals, name of file is loaded from SD card  <a href="PiedPiperStripped_8ino.html#af587eb80e2a6cba0f25bc532ce9f41d1">More...</a><br /></td></tr>
<tr class="separator:af587eb80e2a6cba0f25bc532ce9f41d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2b5eb2431ca1438bf4b1b5c4e9b9182"><td class="memItemLeft" align="right" valign="top">File&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#aa2b5eb2431ca1438bf4b1b5c4e9b9182">data</a></td></tr>
<tr class="memdesc:aa2b5eb2431ca1438bf4b1b5c4e9b9182"><td class="mdescLeft">&#160;</td><td class="mdescRight">used for reading files from SD  <a href="PiedPiperStripped_8ino.html#aa2b5eb2431ca1438bf4b1b5c4e9b9182">More...</a><br /></td></tr>
<tr class="separator:aa2b5eb2431ca1438bf4b1b5c4e9b9182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa042f998806fcdedab1794cebbeaad3"><td class="memItemLeft" align="right" valign="top">RTC_DS3231&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PiedPiperStripped_8ino.html#afa042f998806fcdedab1794cebbeaad3">rtc</a></td></tr>
<tr class="memdesc:afa042f998806fcdedab1794cebbeaad3"><td class="mdescLeft">&#160;</td><td class="mdescRight">object for interacting with rtc  <a href="PiedPiperStripped_8ino.html#afa042f998806fcdedab1794cebbeaad3">More...</a><br /></td></tr>
<tr class="separator:afa042f998806fcdedab1794cebbeaad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3f4ed79c618c00a2bcecefa5d88da138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f4ed79c618c00a2bcecefa5d88da138">&#9670;&nbsp;</a></span>AMP_SD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AMP_SD&#160;&#160;&#160;9</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Amplifier enable. </p>

</div>
</div>
<a id="a6b3806eea0c840ae57143aad5a84e2ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b3806eea0c840ae57143aad5a84e2ab">&#9670;&nbsp;</a></span>AUD_OUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AUD_OUT&#160;&#160;&#160;A0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Audio output pin. </p>

</div>
</div>
<a id="a451c16a9f8be86b7231bd651b3f1d8a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a451c16a9f8be86b7231bd651b3f1d8a4">&#9670;&nbsp;</a></span>AUD_OUT_SAMPLE_FREQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AUD_OUT_SAMPLE_FREQ&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>original sample rate of playback file </p>

</div>
</div>
<a id="ae7bb65edc18ea6805461f3ce98621a8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7bb65edc18ea6805461f3ce98621a8b">&#9670;&nbsp;</a></span>AUD_OUT_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AUD_OUT_TIME&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>maximum length of playback file in seconds </p>

</div>
</div>
<a id="ada94539ceccb038745a46d3047c6241b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada94539ceccb038745a46d3047c6241b">&#9670;&nbsp;</a></span>DEFAULT_PLAYBACK_INT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_PLAYBACK_INT&#160;&#160;&#160;1440</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Briefly wake device after this many minutes if no playback intervals are defined (PBINT.txt is empty) If set to 0, playback will be performed forever and operation times defined in PBINT.txt will be ignored. </p>

</div>
</div>
<a id="a059001a7a2568961faea05247c594eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a059001a7a2568961faea05247c594eea">&#9670;&nbsp;</a></span>HYPNOS_3VR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HYPNOS_3VR&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hypnos 3 volt rail. </p>

</div>
</div>
<a id="aa2af60d7cff46682242567fb759029dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2af60d7cff46682242567fb759029dc">&#9670;&nbsp;</a></span>HYPNOS_5VR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HYPNOS_5VR&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hypnos 5 volt rail. </p>

</div>
</div>
<a id="a7e2d8ef8f0724f23ce84b1e7d0c171d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e2d8ef8f0724f23ce84b1e7d0c171d9">&#9670;&nbsp;</a></span>SD_CS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SD_CS&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chip select for SD. </p>

</div>
</div>
<a id="ab193d614ac37c0f02cbdf729891ee2d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab193d614ac37c0f02cbdf729891ee2d4">&#9670;&nbsp;</a></span>SD_OPEN_ATTEMPT_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SD_OPEN_ATTEMPT_COUNT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>number of times to retry SD.begin() </p>

</div>
</div>
<a id="ab11e49bb2b3f85b5dc522d3e1566c6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab11e49bb2b3f85b5dc522d3e1566c6ea">&#9670;&nbsp;</a></span>SD_OPEN_RETRY_DELAY_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SD_OPEN_RETRY_DELAY_MS&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>delay between SD.begin() attempts </p>

</div>
</div>
<a id="ad46f3292e99b274ab10af94e583dbf31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad46f3292e99b274ab10af94e583dbf31">&#9670;&nbsp;</a></span>SINC_FILTER_UPSAMPLE_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SINC_FILTER_UPSAMPLE_RATIO&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sinc filter upsample ratio, ideally should be a power of 2 </p>

</div>
</div>
<a id="a8b2ab394bc690fb4ff83187ac1eec852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b2ab394bc690fb4ff83187ac1eec852">&#9670;&nbsp;</a></span>SINC_FILTER_ZERO_X</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SINC_FILTER_ZERO_X&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sinc filter number of zero crossings, more crossings will produce a cleaner result but will also use more processor time </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a53ef58bdd502817962e5ff18ada74465"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ef58bdd502817962e5ff18ada74465">&#9670;&nbsp;</a></span>SLEEPMODES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465">SLEEPMODES</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sleep modes available on the Feather M4 Express. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a53ef58bdd502817962e5ff18ada74465a136e5e3efa909548904befb154959956"></a>IDLE0&#160;</td><td class="fielddoc"><p>IDLE0. </p>
</td></tr>
<tr><td class="fieldname"><a id="a53ef58bdd502817962e5ff18ada74465ae866104863031a7c9a3c01e769513336"></a>IDLE1&#160;</td><td class="fielddoc"><p>IDLE1. </p>
</td></tr>
<tr><td class="fieldname"><a id="a53ef58bdd502817962e5ff18ada74465a363a63cb0837a4836265b578e7902246"></a>IDLE2&#160;</td><td class="fielddoc"><p>IDLE2. </p>
</td></tr>
<tr><td class="fieldname"><a id="a53ef58bdd502817962e5ff18ada74465ae4634ae4352b512b38c5da9dc1610ca6"></a>STANDBY&#160;</td><td class="fielddoc"><p>STANDBY sleep mode can exited with a interrupt (this sleep mode is good, but draws ~20mA by default) </p>
</td></tr>
<tr><td class="fieldname"><a id="a53ef58bdd502817962e5ff18ada74465ac22ce256f44d6d9df78af9ee4ee9b3b7"></a>HIBERNATE&#160;</td><td class="fielddoc"><p>HIBERNATE sleep mode can only be exited with a device reset. </p>
</td></tr>
<tr><td class="fieldname"><a id="a53ef58bdd502817962e5ff18ada74465a243c5a167c2e9f1cf4bae8cfe682fcb7"></a>BACKUP&#160;</td><td class="fielddoc"><p>BACKUP sleep mode can only be exited with a device reset. </p>
</td></tr>
<tr><td class="fieldname"><a id="a53ef58bdd502817962e5ff18ada74465aac132f2982b98bcaa3445e535a03ff75"></a>OFF&#160;</td><td class="fielddoc"><p>OFF sleep mode can only be exited with a device reset (best sleep mode to use for least power consumption) </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a42bf83e6351925a1d1beb690c0da26c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bf83e6351925a1d1beb690c0da26c7">&#9670;&nbsp;</a></span>addOperationTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addOperationTime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minute</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>allocate memory to store operation time into dynamically allocated array operationTimes, this function is intended to be used by <a class="el" href="PiedPiperStripped_8ino.html#a74ecc17c52d48df84672c977351befd8">LoadOperationTimes()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hour</td><td>the hour </td></tr>
    <tr><td class="paramname">minute</td><td>the minute </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a28ebac3ac4f9a0dea055360b0b334712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28ebac3ac4f9a0dea055360b0b334712">&#9670;&nbsp;</a></span>BeginSD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BeginSD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to initialize SD card on Hypnos</p>
<dl class="section return"><dt>Returns</dt><dd>True on successful initialization </dd></dl>

</div>
</div>
<a id="add5dd49099d68e30967018b6bf108b0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add5dd49099d68e30967018b6bf108b0d">&#9670;&nbsp;</a></span>calculateUpsampleSincFilterTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calculateUpsampleSincFilterTable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates sinc filter table for upsampling a signal by @SINC_FILTER_UPSAMPLE_RATIO </p>

</div>
</div>
<a id="a549c88d77b1a7dee61f532a50a6d14c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a549c88d77b1a7dee61f532a50a6d14c5">&#9670;&nbsp;</a></span>configurePins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configurePins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures pin modes for all pins </p>

</div>
</div>
<a id="a30c2ab74cd863dcce0e9c6a79a88cb7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c2ab74cd863dcce0e9c6a79a88cb7e">&#9670;&nbsp;</a></span>emptyFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emptyFunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Blank function for ISR setup </p>

</div>
</div>
<a id="a8d17aee60ad53201762c3fd8dff40448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d17aee60ad53201762c3fd8dff40448">&#9670;&nbsp;</a></span>goToSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void goToSleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465">SLEEPMODES</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Puts device to sleep in selected sleep mode</p>
<p>Sleep modes such as IDLE through STANDBY return to the instruction after __WFI(), in this case the return address of the intruction following <a class="el" href="PiedPiperStripped_8ino.html#a8d17aee60ad53201762c3fd8dff40448">goToSleep()</a> However, when going to sleep in HIBRATE though OFF mode, the only way to exit is by resetting the board (At least on the Feather M4 Express)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>the sleep mode to use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af945bfac8e0ca0e4357f87fef159d0e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af945bfac8e0ca0e4357f87fef159d0e4">&#9670;&nbsp;</a></span>indicator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_NeoPixel indicator </td>
          <td>(</td>
          <td class="paramtype">1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">8&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NEO_GRB+&#160;</td>
          <td class="paramname"><em>NEO_KHZ800</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LED indicator. </p>

</div>
</div>
<a id="a2ec00c79533b4c597b3ecd9abd38b52a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ec00c79533b4c597b3ecd9abd38b52a">&#9670;&nbsp;</a></span>initializationFailFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initializationFailFlash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flashes LED to indicate initialization error </p>

</div>
</div>
<a id="a0631412e0a073299f82b6d1a8e9a6ec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0631412e0a073299f82b6d1a8e9a6ec8">&#9670;&nbsp;</a></span>initializationSuccessFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initializationSuccessFlash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flashes LED green to indicate initialization success </p>

</div>
</div>
<a id="a72c0738f4a74e1c18212b5b01d2146e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72c0738f4a74e1c18212b5b01d2146e3">&#9670;&nbsp;</a></span>initializeRTC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool initializeRTC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize RTC and set to alarm mode</p>
<dl class="section return"><dt>Returns</dt><dd>true if successful </dd></dl>

</div>
</div>
<a id="a776c50fdabbed22227ae06792dd4886e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a776c50fdabbed22227ae06792dd4886e">&#9670;&nbsp;</a></span>ITimer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SAMDTimer ITimer </td>
          <td>(</td>
          <td class="paramtype">TIMER_TC3&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SAMD timer interrupt. </p>

</div>
</div>
<a id="a74ecc17c52d48df84672c977351befd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74ecc17c52d48df84672c977351befd8">&#9670;&nbsp;</a></span>LoadOperationTimes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LoadOperationTimes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>load and store operation times from "PBINT.txt" to dynamically allocated operation times array.</p>
<dl class="section return"><dt>Returns</dt><dd>True on success </dd></dl>

</div>
</div>
<a id="a00510b3f6ba15663bf0a8148c616cf16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00510b3f6ba15663bf0a8148c616cf16">&#9670;&nbsp;</a></span>LoadSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LoadSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>load trap settings from "trap.settings". At this time these settings include which file to use for playback and for operation times</p>
<dl class="section return"><dt>Returns</dt><dd>True on success </dd></dl>

</div>
</div>
<a id="ae19e84783631872424b55189542e0325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19e84783631872424b55189542e0325">&#9670;&nbsp;</a></span>LoadSound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LoadSound </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads playback sound file from the SD card and stores to outputSampleBuffer as samples</p>
<p>Once loaded, the data will remain in-place until <a class="el" href="PiedPiperStripped_8ino.html#ae19e84783631872424b55189542e0325">LoadSound()</a> is called again. This means that all future calls to <a class="el" href="PiedPiperStripped_8ino.html#a57e4ed140620dd3e177cbd7c92660254">Playback()</a> will play back the same audio data.</p>
<dl class="section return"><dt>Returns</dt><dd>True if playback sound was loaded successfully </dd></dl>

</div>
</div>
<a id="ad6fa46494611dcbfb87b3e5c7efef153"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6fa46494611dcbfb87b3e5c7efef153">&#9670;&nbsp;</a></span>LogAlive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LogAlive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log the current time to gauge how long the device has been alive in the field </p>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tasks that are to be performed when the device is awake</p>
<p>At this time the only task that is performed is <a class="el" href="PiedPiperStripped_8ino.html#a57e4ed140620dd3e177cbd7c92660254">Playback()</a>, but more can be added in future revision </p>

</div>
</div>
<a id="a89389afa6bc2bf333dd3f55ba5cffdcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89389afa6bc2bf333dd3f55ba5cffdcb">&#9670;&nbsp;</a></span>OpenFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OpenFile </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>open a file in some mode (read, write, etc), using file descriptor "data".</p>
<dl class="section note"><dt>Note</dt><dd>Does not call SD.begin() or control hypnos rails. Up to user to call prior to using this function. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td>name of file. </td></tr>
    <tr><td class="paramname">mode</td><td>open file in this mode (i.e: FILE_READ). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success. </dd></dl>

</div>
</div>
<a id="a6c97f550e2906d36988f871bad00ed2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c97f550e2906d36988f871bad00ed2a">&#9670;&nbsp;</a></span>OutputUpsampledSample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OutputUpsampledSample </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>writes a sample to AUD_OUT and calculates next sample using sinc filter, this function is called by timer interrupt. </p>

</div>
</div>
<a id="a57e4ed140620dd3e177cbd7c92660254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57e4ed140620dd3e177cbd7c92660254">&#9670;&nbsp;</a></span>Playback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Playback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Plays back the playback sound that is loaded from SD card</p>
<p>This works by using the timer interrupt, which is triggered at @SINC_FILTER_UPSAMPLE_RATIO * @SAMPLE_RATE Hz. Although the playback sound was stored at sample rate of @SAMPLE_RATE Hz, a digital sinc filter is used to upsample this data in realtime to the necassary sample rate. </p>

</div>
</div>
<a id="af37f960cddfa2b14d44d725883242b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37f960cddfa2b14d44d725883242b83">&#9670;&nbsp;</a></span>ResetSPI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ResetSPI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset SPI pins, called prior to SPI.begin() as a precaution </p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialization routine</p>
<p>Ensures SD, RTC can and are properly initialized. If so, playback sound and operation times are loaded, if a failure is detected fail flash is initiated indefinetely. Otherwise, on success, a setup playback is performed, and device determines whether to go to sleep or perform tasks that are in <a class="el" href="PiedPiperStripped_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop()</a>. </p>

</div>
</div>
<a id="a7d76a565d6ad625fdb769f1993a9ea75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d76a565d6ad625fdb769f1993a9ea75">&#9670;&nbsp;</a></span>setupOperation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool setupOperation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set RTC alarm to corresponding operation time based on the time of the RTC.</p>
<p>If RTC time is within an operation interval, the device should be awake, alarm is set the the end of that interval. Otherwise, RTC is set to the start of the next operation true. If no operation times are defined in PBINT.txt, alarm will occur every @DEFAULT_PLAYBACK_INT minutes.</p>
<dl class="section return"><dt>Returns</dt><dd>True if RTC time is within an operation interval (indicating that device should be awake) </dd></dl>

</div>
</div>
<a id="ae393e2d86cdd56ebac9dfae383897798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae393e2d86cdd56ebac9dfae383897798">&#9670;&nbsp;</a></span>startISRTimer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startISRTimer </td>
          <td>(</td>
          <td class="paramtype">const unsigned long&#160;</td>
          <td class="paramname"><em>interval_us</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)()&#160;</td>
          <td class="paramname"><em>fnPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable timer interrupt</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interval_us</td><td>The interval between each alarm in microseconds </td></tr>
    <tr><td class="paramname">fnPtr</td><td>Pointer to callback function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab916d989eaeabdd60f24ae2b5078a66a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab916d989eaeabdd60f24ae2b5078a66a">&#9670;&nbsp;</a></span>stopISRTimer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stopISRTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable timer interrupt</p>
<p>This is used to disable the interrupt caused by timer </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa2b5eb2431ca1438bf4b1b5c4e9b9182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2b5eb2431ca1438bf4b1b5c4e9b9182">&#9670;&nbsp;</a></span>data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">File data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>used for reading files from SD </p>

</div>
</div>
<a id="afd79228a708981fbc75ccd3c3ec9342f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd79228a708981fbc75ccd3c3ec9342f">&#9670;&nbsp;</a></span>nextOutputSample</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile short nextOutputSample = 2048</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stores value of the next output sample for playing back audio </p>

</div>
</div>
<a id="aa9f0e8c2e8600cd11a2beff55afc21aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9f0e8c2e8600cd11a2beff55afc21aa">&#9670;&nbsp;</a></span>numOperationTimes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int numOperationTimes = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the number of elements in operationTimes array </p>

</div>
</div>
<a id="ac5f8f9353d893423cdc1c7b7dff6b022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5f8f9353d893423cdc1c7b7dff6b022">&#9670;&nbsp;</a></span>operationTimes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopTime.html">opTime</a>* operationTimes = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>*operationTimes is a dynamically allocated array which stores parsed operation times from PBINT.txt, dynamic memory is used for this because we do not know how many operation times are defined in PBINT.txt during compilation </p>

</div>
</div>
<a id="a3e30e679c93b4f551dd5b0d44c1b71c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e30e679c93b4f551dd5b0d44c1b71c8">&#9670;&nbsp;</a></span>outputSampleBuffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short outputSampleBuffer[<a class="el" href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">AUD_OUT_SAMPLE_FREQ</a> *<a class="el" href="PiedPiperStripped_8ino.html#ae7bb65edc18ea6805461f3ce98621a8b">AUD_OUT_TIME</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>output sample buffer stores the values corresponding to the playback file that is loaded from the SD card </p>

</div>
</div>
<a id="a149657b52d9aa4f78555948ebc0661b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149657b52d9aa4f78555948ebc0661b3">&#9670;&nbsp;</a></span>outputSampleBufferIdx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int outputSampleBufferIdx = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stores the position of the current sample for playback </p>

</div>
</div>
<a id="a3a17d5e948f78547058c12befd2c7d5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a17d5e948f78547058c12befd2c7d5b">&#9670;&nbsp;</a></span>outputSampleDelayTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int outputSampleDelayTime = 1000000 / (<a class="el" href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">AUD_OUT_SAMPLE_FREQ</a> * <a class="el" href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">SINC_FILTER_UPSAMPLE_RATIO</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>output sample delay time, essentially how often the timer interrupt will fire (in microseconds) </p>

</div>
</div>
<a id="a45f277818bdae2e988b4eea01b571894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f277818bdae2e988b4eea01b571894">&#9670;&nbsp;</a></span>playback_filename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char playback_filename[32]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>name of the file used for playback audio, name of file is loaded from SD card </p>

</div>
</div>
<a id="af587eb80e2a6cba0f25bc532ce9f41d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af587eb80e2a6cba0f25bc532ce9f41d1">&#9670;&nbsp;</a></span>playback_interval</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char playback_interval[32]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>name of the file used for loading operation intervals, name of file is loaded from SD card </p>

</div>
</div>
<a id="a2fca0a4962bc07fe1010e0f494c74b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fca0a4962bc07fe1010e0f494c74b81">&#9670;&nbsp;</a></span>playbackSampleCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int playbackSampleCount = <a class="el" href="PiedPiperStripped_8ino.html#a451c16a9f8be86b7231bd651b3f1d8a4">AUD_OUT_SAMPLE_FREQ</a> * <a class="el" href="PiedPiperStripped_8ino.html#ae7bb65edc18ea6805461f3ce98621a8b">AUD_OUT_TIME</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the total number of sample loaded from the playback file. Originally this is set to the maximum number of samples that can be stored SAMPLE_RATE * AUD_OUT_TIME, but this value is updated upon call to <a class="el" href="PiedPiperStripped_8ino.html#ae19e84783631872424b55189542e0325">LoadSound()</a> since our playback sound isn't garanteed to be exactly AUD_OUT_TIME seconds long. </p>

</div>
</div>
<a id="afa042f998806fcdedab1794cebbeaad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa042f998806fcdedab1794cebbeaad3">&#9670;&nbsp;</a></span>rtc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RTC_DS3231 rtc</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>object for interacting with rtc </p>

</div>
</div>
<a id="ad56a3d9df2dada704805e02951fda841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad56a3d9df2dada704805e02951fda841">&#9670;&nbsp;</a></span>settings_filename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char settings_filename[] = &quot;settings.txt&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Name of file to load settings from such as name of playback file and opeation intervals file. </p>

</div>
</div>
<a id="a135a5b2700d254f9273a3408087ae766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a135a5b2700d254f9273a3408087ae766">&#9670;&nbsp;</a></span>sincFilterTableUpsample</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float sincFilterTableUpsample[<a class="el" href="PiedPiperStripped_8ino.html#a366e2fd381c98142cd18d3f91ead2359">sincTableSizeUp</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stores values of sinc function (sin(x) / x) for upsampling the samples stored in outputSampleBuffer during <a class="el" href="PiedPiperStripped_8ino.html#a57e4ed140620dd3e177cbd7c92660254">Playback()</a> using outputUpsampledSample() </p>

</div>
</div>
<a id="a366e2fd381c98142cd18d3f91ead2359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a366e2fd381c98142cd18d3f91ead2359">&#9670;&nbsp;</a></span>sincTableSizeUp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int sincTableSizeUp = (2 * <a class="el" href="PiedPiperStripped_8ino.html#a8b2ab394bc690fb4ff83187ac1eec852">SINC_FILTER_ZERO_X</a> + 1) * <a class="el" href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">SINC_FILTER_UPSAMPLE_RATIO</a> - <a class="el" href="PiedPiperStripped_8ino.html#ad46f3292e99b274ab10af94e583dbf31">SINC_FILTER_UPSAMPLE_RATIO</a> + 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>size of sinc filter table </p>

</div>
</div>
<a id="a0eeff5e8367f449972a7648bc688975e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eeff5e8367f449972a7648bc688975e">&#9670;&nbsp;</a></span>sleepmode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465">SLEEPMODES</a> sleepmode = <a class="el" href="PiedPiperStripped_8ino.html#a53ef58bdd502817962e5ff18ada74465aac132f2982b98bcaa3445e535a03ff75">OFF</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For this version, "OFF" sleep mode is used which results in the least power consumption (draws less than 1mA) </p>

</div>
</div>
<a id="afdb3c36e809dbd77924104038b458966"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdb3c36e809dbd77924104038b458966">&#9670;&nbsp;</a></span>upsampleFilterInput</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile short upsampleFilterInput[<a class="el" href="PiedPiperStripped_8ino.html#a366e2fd381c98142cd18d3f91ead2359">sincTableSizeUp</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sinc filter input buffer for upsampling </p>

</div>
</div>
<a id="ab0139b53c33b21f387a590efff555c27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0139b53c33b21f387a590efff555c27">&#9670;&nbsp;</a></span>upsampleInputCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int upsampleInputCount = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>upsample count, determines whether to pad with zeroes or read next value from outputSampleBuffer </p>

</div>
</div>
<a id="afed89bc2e0332e0607d2f2e912c93c0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed89bc2e0332e0607d2f2e912c93c0a">&#9670;&nbsp;</a></span>upsampleInputIdx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int upsampleInputIdx = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>next position in upsample input buffer </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
