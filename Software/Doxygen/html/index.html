<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pied Piper: Pied Piper Stripped Software</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pied Piper
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Pied Piper Stripped Software </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="description"></a>
Description</h1>
<p>This code is intended for stripped down version of Pied Piper which performs intermittent playbacks based on operation intervals that are stored on the SD card. The code performs in the following manner:</p><ol type="1">
<li>In <a class="el" href="PiedPiperStripped_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup()</a>: all necassary data is loaded from the SD card, filenames for playback sound and playback intervals file are loaded first from the ("settings.txt") file on SD card. Following this, the playback sound (*.PAD) and playback intervals (*.txt) are loaded. If all data is successfully loaded from the SD card and RTC is initialized device flashes NeoPixel green to indicate success. Otherwise, NeoPixel flashes red indefinetely. On success device perfroms a setup playback and the RTC alarm is set to reset the device when the alarm goes off based on the following conditions:<ul>
<li>The current time is within the time of a playback interval - the alarm is set to fire at the time corresponding to the end of the current playback interval (i.e: if playback interval is between 5:00 and 6:00, the alarm will fire at 6:00). The device will perform the tasks assigned in <a class="el" href="PiedPiperStripped_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop()</a> until the RTC alarm goes off.</li>
<li>The current time is not is not within a playback interval - the alarm is set to fire at the time corresponding to the next available operation interval (i.e. if the next available playback interval is between 7:00 and 8:00, the alarm will fire at 7:00). The device will sleep in the "OFF" mode until RTC alarm goes off.</li>
</ul>
</li>
<li>In <a class="el" href="PiedPiperStripped_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop()</a>: At this moment <a class="el" href="PiedPiperStripped_8ino.html#a57e4ed140620dd3e177cbd7c92660254">Playback()</a> is called continously which continously performs playback, but more tasks can be added in future versions.</li>
</ol>
<h1><a class="anchor" id="libraries"></a>
Libraries</h1>
<ul>
<li>SD, SPI, Wire, RTCLib<ul>
<li>used for reading and writing data to SD card, and interacting with RTC</li>
</ul>
</li>
<li>SAMDTimerInterrupt<ul>
<li>timer interrupt library for SAMD boards. Used for performing playback</li>
</ul>
</li>
<li>Adafruit_NeoPixel<ul>
<li>Used for indicating initialization errors</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="todo"></a>
TODO</h1>
<ul>
<li>Add possibility to set delay between playbacks</li>
<li>Add more tasks for device to perform in loop (if requested)</li>
</ul>
<h1><a class="anchor" id="author"></a>
Author</h1>
<ul>
<li>Created by Mykyta (Nick) Synytsia and Vincent Vaughn (May 7, 2024)</li>
</ul>
<p>Copyright (c) 2024 OSU OPEnSLab. All rights reserved. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
